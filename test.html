<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Advanced Calendar & Event Manager</title>
  <!-- Google Fonts & Material Icons -->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet" />
  <!-- AOS CSS -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.css" rel="stylesheet" />
  <!-- FullCalendar CSS -->
  <link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/main.min.css" rel="stylesheet" />
  <!-- Custom CSS -->
  <link rel="stylesheet" href="css/css.css" />
  <style>
    /* Additional styling for the calendar and event form */
    #calendar {
      max-width: 900px;
      margin: 40px auto;
    }
    #eventForm {
      max-width: 600px;
      margin: 20px auto;
      padding: 1em;
      background: #f9f9f9;
      border-radius: 5px;
    }
    #eventForm input, #eventForm button {
      width: 100%;
      padding: 0.5em;
      margin: 0.5em 0;
      font-size: 1em;
    }
  </style>
</head>
<body>
  <header>
    <div class="logo-container">
      <a href="index.html" class="logo">Soyth<span class="italic-x"></span></a>
    </div>
    <nav>
      <!-- Navigation code (omitted for brevity) -->
    </nav>
  </header>

  <!-- Main Section -->
  <section id="calendar-section">
    <h2>Upcoming Events</h2>
    <div id="calendar"></div>
  </section>

  <!-- Advanced Event Form -->
  <section id="event-management">
    <h2>Add New Event</h2>
    <form id="eventForm">
      <input type="text" id="eventTitle" placeholder="Event Title" required />
      <input type="datetime-local" id="eventStart" required />
      <input type="datetime-local" id="eventEnd" />
      <button type="submit">Add Event</button>
    </form>
  </section>

  <!-- Footer (similar structure as your club site) -->
  <footer id="contact">
    <!-- Footer content -->
    <p>&copy; 2025 Soyth Club. All Rights Reserved.</p>
  </footer>

  <!-- JS Scripts -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.js"></script>
  <!-- FullCalendar JS -->
  <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/main.min.js"></script>
  <!-- Firebase (using v8 for simplicity) -->
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
  <!-- Your custom JS -->
  <script src="js/js.js"></script>
  <script>
    // Initialize Firebase with your configuration (replace placeholders with actual config)
    var firebaseConfig = {
      apiKey: "YOUR_API_KEY",
      authDomain: "YOUR_PROJECT_ID.firebaseapp.com",
      projectId: "YOUR_PROJECT_ID",
      storageBucket: "YOUR_PROJECT_ID.appspot.com",
      messagingSenderId: "YOUR_SENDER_ID",
      appId: "YOUR_APP_ID"
    };
    firebase.initializeApp(firebaseConfig);
    var db = firebase.firestore();

    // Initialize FullCalendar
    document.addEventListener("DOMContentLoaded", function() {
      var calendarEl = document.getElementById("calendar");
      var calendar = new FullCalendar.Calendar(calendarEl, {
        initialView: "dayGridMonth",
        headerToolbar: {
          left: "prev,next today",
          center: "title",
          right: "dayGridMonth,timeGridWeek,timeGridDay"
        },
        events: [] // Events will be loaded from Firestore
      });
      calendar.render();

      // Real-time listener: Update calendar events on any changes in Firestore "events" collection
      db.collection("events").onSnapshot((snapshot) => {
        let events = [];
        snapshot.forEach((doc) => {
          const data = doc.data();
          events.push({
            id: doc.id,
            title: data.title,
            start: data.start, // e.g., "2025-04-15T10:00:00"
            end: data.end || null
          });
        });
        calendar.removeAllEventSources();
        calendar.addEventSource(events);
      });

      // Handle form submission to add a new event
      document.getElementById("eventForm").addEventListener("submit", function(e) {
        e.preventDefault();
        let title = document.getElementById("eventTitle").value;
        let start = document.getElementById("eventStart").value;
        let end = document.getElementById("eventEnd").value;

        // Add event to Firestore (create a new document in the "events" collection)
        db.collection("events").add({
          title: title,
          start: start,
          end: end || null
        }).then(() => {
          // Clear the form on success
          document.getElementById("eventForm").reset();
        }).catch((error) => {
          console.error("Error adding event: ", error);
        });
      });
    });
  </script>
</body>
</html>